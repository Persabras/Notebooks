{"cells":[{"source":"<a href=\"https://www.kaggle.com/code/yousefmoterassed/esophageal-cancer-and-alcohol-tobacco-use?scriptVersionId=107602436\" target=\"_blank\"><img align=\"left\" alt=\"Kaggle\" title=\"Open in Kaggle\" src=\"https://kaggle.com/static/images/open-in-kaggle.svg\"></a>","metadata":{},"cell_type":"markdown","outputs":[],"execution_count":0},{"cell_type":"markdown","id":"905012d5","metadata":{"_cell_guid":"b1076dfc-b9ad-4769-8c92-a6c4dae69d19","_uuid":"8f2839f25d086af736a60e9eeb907d3b93b6e0e5","execution":{"iopub.execute_input":"2022-10-08T17:12:19.074147Z","iopub.status.busy":"2022-10-08T17:12:19.044286Z","iopub.status.idle":"2022-10-08T17:12:19.144991Z"},"papermill":{"duration":0.010069,"end_time":"2022-10-10T00:53:19.130903","exception":false,"start_time":"2022-10-10T00:53:19.120834","status":"completed"},"tags":[]},"source":["<br>\n","<br><br>\n","<br>\n","\n","<div style=\"width:100%;text-align: center; font-size:55px;font-family:Optima; text-shadow: 4px 4px 4px #aaa;\">Esophageal cancer and alcohol/tobacco use</div>\n"," \n","<br>\n","<br>\n","<br>\n","<br>\n","\n","<div style=\"align-items:center; justify-content: center;max-width: 100%;\n","  height: auto; text-align:center; color:gray\">\n","<img src=\"https://i.ibb.co/HBpcQJ3/pngkey-com-cancer-cell-png-4079860-removebg-preview.png\" alt=\"Cancer Cell Png - Cancer Cell No Background@pngkey.com\" border=\"0\" style=\"display: block;\n","  margin-left: auto;\n","  margin-right: auto;\n","  width: 50%;; max-width: 40%; width:100%; vertical-align: middle;horizontal-align: middle;height: auto;\">\n","</div>\n","\n","\n","<div style=\"width:100%;font-family: Optima; font-size: 17px; font-weight: 400; line-height: 1.5; text-align: left; font-style: italic\">\n","\n","<br>\n","<br>\n","\n","    \n","Author: Yousef Moterassed<br>\n","October 2022<br>\n","</div>\n","\n","***"]},{"cell_type":"markdown","id":"a82fe09e","metadata":{"papermill":{"duration":0.009171,"end_time":"2022-10-10T00:53:19.148225","exception":false,"start_time":"2022-10-10T00:53:19.139054","status":"completed"},"tags":[]},"source":["<br>\n","<br>\n","\n","# <div style=\"width:100%;text-align: left; font-size:45px; font-family:Optima; font-weight:300; height: 30px; text-shadow: 4px 4px 4px #aaa;\">Abstract</div>"]},{"cell_type":"markdown","id":"0aa48d73","metadata":{"papermill":{"duration":0.008052,"end_time":"2022-10-10T00:53:19.164706","exception":false,"start_time":"2022-10-10T00:53:19.156654","status":"completed"},"tags":[]},"source":["<div style=\"width:100%; font-family: Optima; font-size: 20px; font-weight: 400; line-height: 1.5; text-align: juatify;\">My name is <a href=\"https://www.kaggle.com/yousefmoterassed\">Yousef Moterassed</a>, a Persian borned boy who lives in Samba-Land ðŸ‡§ðŸ‡·. I am working in the trade and business field for many years and after stepping into the Data Science and Data Analysis road, decided to combine this knowledge to be able to uncover some hidden information behind the curtain of the data, and release some data-driven information publicly in which it might help myself and our society to increase their understanding and common knowledge about what's going on in our world.</div>"]},{"cell_type":"markdown","id":"051f1cd9","metadata":{"papermill":{"duration":0.008419,"end_time":"2022-10-10T00:53:19.181089","exception":false,"start_time":"2022-10-10T00:53:19.17267","status":"completed"},"tags":[]},"source":["<br>\n","<br>\n","<br>\n","\n","# <div style=\"width:100%;text-align: left; font-size:45px; font-family:Optima; font-weight:300; height: 30px; text-shadow: 4px 4px 4px #aaa\">Introduction</div>\n","\n","<br>\n","<br>\n","\n","<div style=\"width:100%;font-family: Optima; font-size: 20px; font-weight: 400; line-height: 1.5; text-align: justify;\">According to <a href=\"https://www.cancer.gov\">National Cancer Institute</a>, Esophageal Cancer is a disease in which malignant (cancer) cells form in the tissues of the esophagus.<br>\n","The esophagus is the hollow, muscular tube that moves food and liquid from the throat to the stomach. The wall of the esophagus is made up of several layers of tissue, including mucous membrane, muscle, and connective tissue. Esophageal cancer starts on the inside lining of the esophagus and spreads outward through the other layers as it grows.<br>\n","Smoking, heavy alcohol use, and Barrett esophagus can increase the risk of esophageal cancer.\n","Anything that increases your risk of getting a disease is called a risk factor. Having a risk factor does not mean that you will get cancer; not having risk factors doesn't mean that you will not get cancer. Talk with your doctor if you think you may be at risk. Risk factors include the following:\n","<ul>\n","    <li>Tobacco use.</li>\n","    <li>Heavy alcohol use.</li>\n","    <li>Barrett esophagus: A condition in which the cells lining the lower part of the esophagus have changed or been replaced with abnormal cells that could lead to cancer of the esophagus. Gastric reflux (heartburn) is the most common cause of Barrett esophagus.</li>\n","    <li>Older age.</li>\n","</ul>\n","For more information see the PDQ summary on <a href=\"https://www.cancer.gov/types/esophageal/patient/esophageal-prevention-pdq\">Esophageal Cancer Prevention</a> on National Cancer Institute <a href=\"https://www.cancer.gov\">website</a>.</div>"]},{"cell_type":"markdown","id":"e0e698fe","metadata":{"papermill":{"duration":0.008353,"end_time":"2022-10-10T00:53:19.198325","exception":false,"start_time":"2022-10-10T00:53:19.189972","status":"completed"},"tags":[]},"source":["<br>\n","<br>\n","<br>\n","\n","# <div style=\"width:100%;text-align: left; font-size:45px; font-family:Optima; font-weight:300; height: 30px; text-shadow: 4px 4px 4px #aaa\">About this Dataset</div>\n","\n","<br>\n","<br>\n","\n","<div style=\"width:100%;font-family: Optima; font-size: 20px; font-weight: 400; line-height: 1.5; text-align: justify;\">The dataset is available in base R, and recorded from a case-control study of (o)esophageal cancer in Ille-et-Vilaine, France. This dataset can be called with the variable name: <code>(esoph)</code>. You also can find the full documentation <a href=\"https://www.rdocumentation.org/packages/datasets/versions/3.6.2/topics/esoph\">here</a>.<br>This  dataset contain four columns and each row contains one group of the experiment. Each group has a different combination of age, alcohol consumption, and tobacco consumption. The number of cancer cases and number of controls (individuals without cancer) are reported for each group.</div>\n","    \n","<br>\n","<br>\n","<br>\n","\n","# <div style=\"width:100%;text-align: left; font-size:45px; font-family:Optima; font-weight:300; height: 30px; text-shadow: 4px 4px 4px #aaa\">Questions to be answered</div>\n","\n","<br>\n","<br>\n","\n","<div style=\"width:100%;font-family: Optima; font-size: 20px; font-weight: 400; line-height: 1.5; text-align: justify;\">We will be using this dataset to answer the following questions:\n","    \n","<ol>\n","    <li>Define how many groups are in the study(age,alcohol, and tobacco consumption combinations)?</li>\n","    <li>What is total number of cases recorded?</li>\n","    <li>How many cases controled cases are there?</li>\n","    <li>What is the probability that a subject in the highest alcohol consumption group is a cancer case?</li>\n","    <li>What is the probability that a subject in the lowest alcohol consumption group is a cancer case?</li>\n","    <li>Given that a person is a case, what is the probability that they smoke 10g or more a day?</li>\n","    <li>Given that a person is a control, what is the probability that they smoke 10g or more a day?</li>\n","    <li>For all cases, what is the probability of being in the highest alcohol group?</li>\n","    <li>For all cases, what is the probability of being in the highest tobacco group?</li>\n","    <li>For all cases, what is the probability of being in the highest alcohol group <b>and</b> the highest tobacco group?</li>\n","    <li>For cases, what is the probability of being in the highest alcohol group <b>or</b> the highest tobacco group?</li>\n","    <li>For controled cases, what is the probability of being in the highest alcohol group?</li>\n","    <li>How many times more likely are cases than controls to be in the highest alcohol group?</li>\n","    <li>For controls, what is the probability of being in the highest tobacco group?</li>\n","    <li>For controls, what is the probability of being in the highest alcohol group <b>and</b> the highest tobacco group?</li>\n","    <li>For controls, what is the probability of being in the highest alcohol group <b>or</b> the highest tobacco group?</li>\n","    <li>How many times more likely are cases than controls to be in the highest alcohol group <b>or</b> the highest tobacco group?</li>\n","</ol>\n","</div>"]},{"cell_type":"code","execution_count":1,"id":"7041ddfb","metadata":{"_kg_hide-input":true,"_kg_hide-output":true,"execution":{"iopub.execute_input":"2022-10-10T00:53:19.219612Z","iopub.status.busy":"2022-10-10T00:53:19.216376Z","iopub.status.idle":"2022-10-10T00:53:20.853083Z","shell.execute_reply":"2022-10-10T00:53:20.851209Z"},"papermill":{"duration":1.649647,"end_time":"2022-10-10T00:53:20.855773","exception":false,"start_time":"2022-10-10T00:53:19.206126","status":"completed"},"tags":[]},"outputs":[{"name":"stderr","output_type":"stream","text":["â”€â”€ \u001b[1mAttaching packages\u001b[22m â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse 1.3.2 â”€â”€\n","\u001b[32mâœ”\u001b[39m \u001b[34mggplot2\u001b[39m 3.3.6      \u001b[32mâœ”\u001b[39m \u001b[34mpurrr  \u001b[39m 0.3.4 \n","\u001b[32mâœ”\u001b[39m \u001b[34mtibble \u001b[39m 3.1.8      \u001b[32mâœ”\u001b[39m \u001b[34mdplyr  \u001b[39m 1.0.10\n","\u001b[32mâœ”\u001b[39m \u001b[34mtidyr  \u001b[39m 1.2.1      \u001b[32mâœ”\u001b[39m \u001b[34mstringr\u001b[39m 1.4.1 \n","\u001b[32mâœ”\u001b[39m \u001b[34mreadr  \u001b[39m 2.1.2      \u001b[32mâœ”\u001b[39m \u001b[34mforcats\u001b[39m 0.5.2 \n","â”€â”€ \u001b[1mConflicts\u001b[22m â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ tidyverse_conflicts() â”€â”€\n","\u001b[31mâœ–\u001b[39m \u001b[34mdplyr\u001b[39m::\u001b[32mfilter()\u001b[39m masks \u001b[34mstats\u001b[39m::filter()\n","\u001b[31mâœ–\u001b[39m \u001b[34mdplyr\u001b[39m::\u001b[32mlag()\u001b[39m    masks \u001b[34mstats\u001b[39m::lag()\n"]}],"source":["library(tidyverse)"]},{"cell_type":"markdown","id":"1ff80e4b","metadata":{"papermill":{"duration":0.008177,"end_time":"2022-10-10T00:53:20.872635","exception":false,"start_time":"2022-10-10T00:53:20.864458","status":"completed"},"tags":[]},"source":["# <div style=\"width:100%;text-align: left; font-size:45px; font-family:Optima; font-weight:300; height: 30px; text-shadow: 4px 4px 4px #aaa\">Questions 1</div>\n","\n","<br>\n","<br>\n","\n","<div style=\"width:100%;font-family: Optima; font-size: 20px; font-weight: 400; line-height: 1.5; text-align: justify;\">Define how many groups are in the study(age,alcohol, and tobacco consumption combinations)?<br>\n","First let's have a summary of this dataset for the rest of our analysis, then we can find number of groups by (age, alcohol, and tobacco consumption combinations) in several easy methods such as codes below:</div>\n","    "]},{"cell_type":"code","execution_count":2,"id":"d99fc4e0","metadata":{"_kg_hide-input":true,"execution":{"iopub.execute_input":"2022-10-10T00:53:20.92227Z","iopub.status.busy":"2022-10-10T00:53:20.891033Z","iopub.status.idle":"2022-10-10T00:53:20.949673Z","shell.execute_reply":"2022-10-10T00:53:20.947807Z"},"papermill":{"duration":0.071564,"end_time":"2022-10-10T00:53:20.952306","exception":false,"start_time":"2022-10-10T00:53:20.880742","status":"completed"},"tags":[]},"outputs":[{"data":{"text/plain":["   agegp          alcgp         tobgp        ncases         ncontrols    \n"," 25-34:15   0-39g/day:23   0-9g/day:24   Min.   : 0.000   Min.   : 1.00  \n"," 35-44:15   40-79    :23   10-19   :24   1st Qu.: 0.000   1st Qu.: 3.00  \n"," 45-54:16   80-119   :21   20-29   :20   Median : 1.000   Median : 6.00  \n"," 55-64:16   120+     :21   30+     :20   Mean   : 2.273   Mean   :11.08  \n"," 65-74:15                                3rd Qu.: 4.000   3rd Qu.:14.00  \n"," 75+  :11                                Max.   :17.000   Max.   :60.00  "]},"metadata":{},"output_type":"display_data"}],"source":["summary(esoph)"]},{"cell_type":"code","execution_count":3,"id":"6d7d960f","metadata":{"_kg_hide-input":true,"execution":{"iopub.execute_input":"2022-10-10T00:53:20.972426Z","iopub.status.busy":"2022-10-10T00:53:20.970816Z","iopub.status.idle":"2022-10-10T00:53:20.987682Z","shell.execute_reply":"2022-10-10T00:53:20.985854Z"},"papermill":{"duration":0.029711,"end_time":"2022-10-10T00:53:20.990379","exception":false,"start_time":"2022-10-10T00:53:20.960668","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["There are 88 groups in this dataset"]}],"source":["cat('There are', nrow(esoph), 'groups in this dataset')"]},{"cell_type":"markdown","id":"82e78beb","metadata":{"papermill":{"duration":0.013512,"end_time":"2022-10-10T00:53:21.012212","exception":false,"start_time":"2022-10-10T00:53:20.9987","status":"completed"},"tags":[]},"source":["# <div style=\"width:100%;text-align: left; font-size:45px; font-family:Optima; font-weight:300; height: 30px; text-shadow: 4px 4px 4px #aaa\">Questions 2</div>\n","\n","<br>\n","<br>\n","\n","<div style=\"width:100%;font-family: Optima; font-size: 20px; font-weight: 400; line-height: 1.5; text-align: justify;\">What is total number of cases recorded?<br>\n","Well we can easily sum the number of cases and have the answer as below:</div>\n","    "]},{"cell_type":"code","execution_count":4,"id":"2eb35b22","metadata":{"execution":{"iopub.execute_input":"2022-10-10T00:53:21.033311Z","iopub.status.busy":"2022-10-10T00:53:21.031755Z","iopub.status.idle":"2022-10-10T00:53:21.052334Z","shell.execute_reply":"2022-10-10T00:53:21.050452Z"},"papermill":{"duration":0.034316,"end_time":"2022-10-10T00:53:21.054917","exception":false,"start_time":"2022-10-10T00:53:21.020601","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["200"],"text/latex":["200"],"text/markdown":["200"],"text/plain":["[1] 200"]},"metadata":{},"output_type":"display_data"}],"source":["all_cases<- sum(esoph$ncases)\n","all_cases"]},{"cell_type":"markdown","id":"237903b2","metadata":{"papermill":{"duration":0.009643,"end_time":"2022-10-10T00:53:21.074627","exception":false,"start_time":"2022-10-10T00:53:21.064984","status":"completed"},"tags":[]},"source":["# <div style=\"width:100%;text-align: left; font-size:45px; font-family:Optima; font-weight:300; height: 30px; text-shadow: 4px 4px 4px #aaa\">Questions 3</div>\n","\n","<br>\n","<br>\n","\n","<div style=\"width:100%;font-family: Optima; font-size: 20px; font-weight: 400; line-height: 1.5; text-align: justify;\">How many controlled cases are there?<br>\n","Controlled cases are presented as <code>ncontrol</code> column, so we can simply sum the values:</div>\n","    "]},{"cell_type":"code","execution_count":5,"id":"a8c3f92e","metadata":{"execution":{"iopub.execute_input":"2022-10-10T00:53:21.094684Z","iopub.status.busy":"2022-10-10T00:53:21.093167Z","iopub.status.idle":"2022-10-10T00:53:21.113057Z","shell.execute_reply":"2022-10-10T00:53:21.111182Z"},"papermill":{"duration":0.033578,"end_time":"2022-10-10T00:53:21.116615","exception":false,"start_time":"2022-10-10T00:53:21.083037","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["975"],"text/latex":["975"],"text/markdown":["975"],"text/plain":["[1] 975"]},"metadata":{},"output_type":"display_data"}],"source":["all_controls<- sum(esoph$ncontrols)\n","all_controls"]},{"cell_type":"markdown","id":"efb1d5ae","metadata":{"papermill":{"duration":0.008619,"end_time":"2022-10-10T00:53:21.133941","exception":false,"start_time":"2022-10-10T00:53:21.125322","status":"completed"},"tags":[]},"source":["# <div style=\"width:100%;text-align: left; font-size:45px; font-family:Optima; font-weight:300; height: 30px; text-shadow: 4px 4px 4px #aaa\">Questions 4</div>\n","\n","<br>\n","<br>\n","\n","<div style=\"width:100%;font-family: Optima; font-size: 20px; font-weight: 400; line-height: 1.5; text-align: justify;\">What is the probability that a subject in the highest alcohol consumption group is a cancer case?<br>\n","First we need to know which group has the maximum alcohol consumption, then have a proportion of a subject to be in that group with a simple statistical formula: a/a+b</div>\n","    "]},{"cell_type":"code","execution_count":6,"id":"89d5eb43","metadata":{"execution":{"iopub.execute_input":"2022-10-10T00:53:21.155317Z","iopub.status.busy":"2022-10-10T00:53:21.153681Z","iopub.status.idle":"2022-10-10T00:53:21.249939Z","shell.execute_reply":"2022-10-10T00:53:21.24813Z"},"papermill":{"duration":0.109266,"end_time":"2022-10-10T00:53:21.252401","exception":false,"start_time":"2022-10-10T00:53:21.143135","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["120+\n","<details>\n","\t<summary style=display:list-item;cursor:pointer>\n","\t\t<strong>Levels</strong>:\n","\t</summary>\n","\t<style>\n","\t.list-inline {list-style: none; margin:0; padding: 0}\n","\t.list-inline>li {display: inline-block}\n","\t.list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","\t</style>\n","\t<ol class=list-inline><li>'0-39g/day'</li><li>'40-79'</li><li>'80-119'</li><li>'120+'</li></ol>\n","</details>"],"text/latex":["120+\n","\\emph{Levels}: \\begin{enumerate*}\n","\\item '0-39g/day'\n","\\item '40-79'\n","\\item '80-119'\n","\\item '120+'\n","\\end{enumerate*}\n"],"text/markdown":["120+\n","**Levels**: 1. '0-39g/day'\n","2. '40-79'\n","3. '80-119'\n","4. '120+'\n","\n","\n"],"text/plain":["[1] 120+\n","Levels: 0-39g/day < 40-79 < 80-119 < 120+"]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["0.402"],"text/latex":["0.402"],"text/markdown":["0.402"],"text/plain":["[1] 0.402"]},"metadata":{},"output_type":"display_data"}],"source":["options(digits = 3) # Only three digits are enough\n","\n","max(esoph$alcgp) # defining the highest alcohol consumption group\n","\n","esoph %>% filter(alcgp == \"120+\") %>% \n","  summarize(ncases=sum(ncases), ncontrols=sum(ncontrols)) %>% \n","  mutate(canalc = ncases/(ncontrols+ncases)) %>% pull(canalc) %>% round(digits=3)"]},{"cell_type":"markdown","id":"51c66937","metadata":{"papermill":{"duration":0.008906,"end_time":"2022-10-10T00:53:21.270201","exception":false,"start_time":"2022-10-10T00:53:21.261295","status":"completed"},"tags":[]},"source":["# <div style=\"width:100%;text-align: left; font-size:45px; font-family:Optima; font-weight:300; height: 30px; text-shadow: 4px 4px 4px #aaa\">Questions 5</div>\n","\n","<br>\n","<br>\n","\n","<div style=\"width:100%;font-family: Optima; font-size: 20px; font-weight: 400; line-height: 1.5; text-align: justify;\">What is the probability that a subject in the lowest alcohol consumption group is a cancer case?<br>\n","First we need to know which group has the minimum alcohol consumption, then have a proportion of a subject to be in that group with the same formula as above: a/a+b</div>\n","    "]},{"cell_type":"code","execution_count":7,"id":"a48b01f7","metadata":{"execution":{"iopub.execute_input":"2022-10-10T00:53:21.293229Z","iopub.status.busy":"2022-10-10T00:53:21.291444Z","iopub.status.idle":"2022-10-10T00:53:21.32774Z","shell.execute_reply":"2022-10-10T00:53:21.325872Z"},"papermill":{"duration":0.050156,"end_time":"2022-10-10T00:53:21.33033","exception":false,"start_time":"2022-10-10T00:53:21.280174","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["0-39g/day\n","<details>\n","\t<summary style=display:list-item;cursor:pointer>\n","\t\t<strong>Levels</strong>:\n","\t</summary>\n","\t<style>\n","\t.list-inline {list-style: none; margin:0; padding: 0}\n","\t.list-inline>li {display: inline-block}\n","\t.list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","\t</style>\n","\t<ol class=list-inline><li>'0-39g/day'</li><li>'40-79'</li><li>'80-119'</li><li>'120+'</li></ol>\n","</details>"],"text/latex":["0-39g/day\n","\\emph{Levels}: \\begin{enumerate*}\n","\\item '0-39g/day'\n","\\item '40-79'\n","\\item '80-119'\n","\\item '120+'\n","\\end{enumerate*}\n"],"text/markdown":["0-39g/day\n","**Levels**: 1. '0-39g/day'\n","2. '40-79'\n","3. '80-119'\n","4. '120+'\n","\n","\n"],"text/plain":["[1] 0-39g/day\n","Levels: 0-39g/day < 40-79 < 80-119 < 120+"]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["0.0653"],"text/latex":["0.0653"],"text/markdown":["0.0653"],"text/plain":["[1] 0.0653"]},"metadata":{},"output_type":"display_data"}],"source":["min(esoph$alcgp)\n","esoph %>% filter(alcgp==\"0-39g/day\") %>% \n","  summarize(ncases= sum(ncases), ncontrols= sum(ncontrols)) %>% \n","  mutate(lowalc= ncases/(ncases+ncontrols)) %>% pull(lowalc) %>% round(4)"]},{"cell_type":"markdown","id":"ca335e01","metadata":{"papermill":{"duration":0.010044,"end_time":"2022-10-10T00:53:21.349645","exception":false,"start_time":"2022-10-10T00:53:21.339601","status":"completed"},"tags":[]},"source":["# <div style=\"width:100%;text-align: left; font-size:45px; font-family:Optima; font-weight:300; height: 30px; text-shadow: 4px 4px 4px #aaa\">Questions 6</div>\n","\n","<br>\n","<br>\n","\n","<div style=\"width:100%;font-family: Optima; font-size: 20px; font-weight: 400; line-height: 1.5; text-align: justify;\">Given that if a person is a case, what is the probability that they smoke 10g or more a day?<br>\n","Here we need to know which groups have the tobacco consumption more than 10g, then have a proportion of a subject to be in that group with a simple statistical formula: sum/total</div>\n","    "]},{"cell_type":"code","execution_count":8,"id":"96258380","metadata":{"execution":{"iopub.execute_input":"2022-10-10T00:53:21.372238Z","iopub.status.busy":"2022-10-10T00:53:21.370628Z","iopub.status.idle":"2022-10-10T00:53:21.405033Z","shell.execute_reply":"2022-10-10T00:53:21.403067Z"},"papermill":{"duration":0.048416,"end_time":"2022-10-10T00:53:21.407646","exception":false,"start_time":"2022-10-10T00:53:21.35923","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["0-9g/day\n","<details>\n","\t<summary style=display:list-item;cursor:pointer>\n","\t\t<strong>Levels</strong>:\n","\t</summary>\n","\t<style>\n","\t.list-inline {list-style: none; margin:0; padding: 0}\n","\t.list-inline>li {display: inline-block}\n","\t.list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","\t</style>\n","\t<ol class=list-inline><li>'0-9g/day'</li><li>'10-19'</li><li>'20-29'</li><li>'30+'</li></ol>\n","</details>"],"text/latex":["0-9g/day\n","\\emph{Levels}: \\begin{enumerate*}\n","\\item '0-9g/day'\n","\\item '10-19'\n","\\item '20-29'\n","\\item '30+'\n","\\end{enumerate*}\n"],"text/markdown":["0-9g/day\n","**Levels**: 1. '0-9g/day'\n","2. '10-19'\n","3. '20-29'\n","4. '30+'\n","\n","\n"],"text/plain":["[1] 0-9g/day\n","Levels: 0-9g/day < 10-19 < 20-29 < 30+"]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["0.61"],"text/latex":["0.61"],"text/markdown":["0.61"],"text/plain":["[1] 0.61"]},"metadata":{},"output_type":"display_data"}],"source":["min(esoph$tobgp)\n","x<- esoph %>% filter(tobgp != \"0-9g/day\") %>% \n","  pull(ncases) %>% sum()\n","x/all_cases"]},{"cell_type":"markdown","id":"6114949e","metadata":{"papermill":{"duration":0.011109,"end_time":"2022-10-10T00:53:21.428501","exception":false,"start_time":"2022-10-10T00:53:21.417392","status":"completed"},"tags":[]},"source":["# <div style=\"width:100%;text-align: left; font-size:45px; font-family:Optima; font-weight:300; height: 30px; text-shadow: 4px 4px 4px #aaa\">Questions 7</div>\n","\n","<br>\n","<br>\n","\n","<div style=\"width:100%;font-family: Optima; font-size: 20px; font-weight: 400; line-height: 1.5; text-align: justify;\">Given that if a person is a control, what is the probability that they smoke 10g or more a day?<br>\n","First we need to know which group has the minimum alcohol consumption, then have a proportion of a subject to be in that group with a simple statistical formula: a/a+b</div>\n","    "]},{"cell_type":"code","execution_count":9,"id":"ad7b1a17","metadata":{"execution":{"iopub.execute_input":"2022-10-10T00:53:21.4511Z","iopub.status.busy":"2022-10-10T00:53:21.449493Z","iopub.status.idle":"2022-10-10T00:53:21.476692Z","shell.execute_reply":"2022-10-10T00:53:21.474848Z"},"papermill":{"duration":0.041092,"end_time":"2022-10-10T00:53:21.479212","exception":false,"start_time":"2022-10-10T00:53:21.43812","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["0.462"],"text/latex":["0.462"],"text/markdown":["0.462"],"text/plain":["[1] 0.462"]},"metadata":{},"output_type":"display_data"}],"source":["x<- esoph %>% filter(tobgp != \"0-9g/day\") %>% \n","  pull(ncontrols) %>% sum()\n","round(x/all_controls, 3)"]},{"cell_type":"markdown","id":"422a308c","metadata":{"papermill":{"duration":0.009741,"end_time":"2022-10-10T00:53:21.49895","exception":false,"start_time":"2022-10-10T00:53:21.489209","status":"completed"},"tags":[]},"source":["# <div style=\"width:100%;text-align: left; font-size:45px; font-family:Optima; font-weight:300; height: 30px; text-shadow: 4px 4px 4px #aaa\">Questions 8</div>\n","\n","<br>\n","<br>\n","\n","<div style=\"width:100%;font-family: Optima; font-size: 20px; font-weight: 400; line-height: 1.5; text-align: justify;\">For all cases, what is the probability of being in the highest alcohol group?<br>\n","To answer this question we easily filter our dataset and divide it by total cases</div>\n"]},{"cell_type":"code","execution_count":10,"id":"0aa4e838","metadata":{"execution":{"iopub.execute_input":"2022-10-10T00:53:21.522352Z","iopub.status.busy":"2022-10-10T00:53:21.520752Z","iopub.status.idle":"2022-10-10T00:53:21.552767Z","shell.execute_reply":"2022-10-10T00:53:21.550451Z"},"papermill":{"duration":0.046632,"end_time":"2022-10-10T00:53:21.555739","exception":false,"start_time":"2022-10-10T00:53:21.509107","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["0.225"],"text/latex":["0.225"],"text/markdown":["0.225"],"text/plain":["[1] 0.225"]},"metadata":{},"output_type":"display_data"}],"source":["x<- esoph %>% filter(alcgp==\"120+\") %>% \n","  summarize(ncases=sum(ncases)) %>% pull(ncases)\n","alcp<- x/all_cases\n","alcp"]},{"cell_type":"markdown","id":"cd634540","metadata":{"papermill":{"duration":0.009803,"end_time":"2022-10-10T00:53:21.575884","exception":false,"start_time":"2022-10-10T00:53:21.566081","status":"completed"},"tags":[]},"source":["# <div style=\"width:100%;text-align: left; font-size:45px; font-family:Optima; font-weight:300; height: 30px; text-shadow: 4px 4px 4px #aaa\">Questions 9</div>\n","\n","<br>\n","<br>\n","\n","<div style=\"width:100%;font-family: Optima; font-size: 20px; font-weight: 400; line-height: 1.5; text-align: justify;\">For all cases, what is the probability of being in the highest tobacco group?<br>\n","To answer this question we just need to filter the high tobacco consumption and divide the sum of the cases to the total cases.</div>\n"]},{"cell_type":"code","execution_count":11,"id":"a5d86412","metadata":{"execution":{"iopub.execute_input":"2022-10-10T00:53:21.599532Z","iopub.status.busy":"2022-10-10T00:53:21.597833Z","iopub.status.idle":"2022-10-10T00:53:21.637941Z","shell.execute_reply":"2022-10-10T00:53:21.635625Z"},"papermill":{"duration":0.05526,"end_time":"2022-10-10T00:53:21.640869","exception":false,"start_time":"2022-10-10T00:53:21.585609","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["30+\n","<details>\n","\t<summary style=display:list-item;cursor:pointer>\n","\t\t<strong>Levels</strong>:\n","\t</summary>\n","\t<style>\n","\t.list-inline {list-style: none; margin:0; padding: 0}\n","\t.list-inline>li {display: inline-block}\n","\t.list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","\t</style>\n","\t<ol class=list-inline><li>'0-9g/day'</li><li>'10-19'</li><li>'20-29'</li><li>'30+'</li></ol>\n","</details>"],"text/latex":["30+\n","\\emph{Levels}: \\begin{enumerate*}\n","\\item '0-9g/day'\n","\\item '10-19'\n","\\item '20-29'\n","\\item '30+'\n","\\end{enumerate*}\n"],"text/markdown":["30+\n","**Levels**: 1. '0-9g/day'\n","2. '10-19'\n","3. '20-29'\n","4. '30+'\n","\n","\n"],"text/plain":["[1] 30+\n","Levels: 0-9g/day < 10-19 < 20-29 < 30+"]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["0.155"],"text/latex":["0.155"],"text/markdown":["0.155"],"text/plain":["[1] 0.155"]},"metadata":{},"output_type":"display_data"}],"source":["max(esoph$tobgp)\n","y<- esoph %>% filter(tobgp==\"30+\") %>% \n","  summarize(ncases= sum(ncases)) %>% pull(ncases)\n","tobp<-y/all_cases\n","tobp"]},{"cell_type":"markdown","id":"cf7c2d75","metadata":{"papermill":{"duration":0.01024,"end_time":"2022-10-10T00:53:21.661088","exception":false,"start_time":"2022-10-10T00:53:21.650848","status":"completed"},"tags":[]},"source":["# <div style=\"width:100%;text-align: left; font-size:45px; font-family:Optima; font-weight:300; height: 30px; text-shadow: 4px 4px 4px #aaa\">Questions 10</div>\n","\n","<br>\n","<br>\n","\n","<div style=\"width:100%;font-family: Optima; font-size: 20px; font-weight: 400; line-height: 1.5; text-align: justify;\">For all cases, what is the probability of being in the highest alcohol group <b>and</b> the highest tobacco group?<br>\n","This is the same process as the question above, with only difference in alcohol consumtion beside tobacco.</div>\n"]},{"cell_type":"code","execution_count":12,"id":"836a35ac","metadata":{"execution":{"iopub.execute_input":"2022-10-10T00:53:21.692005Z","iopub.status.busy":"2022-10-10T00:53:21.690397Z","iopub.status.idle":"2022-10-10T00:53:21.728446Z","shell.execute_reply":"2022-10-10T00:53:21.72584Z"},"papermill":{"duration":0.060117,"end_time":"2022-10-10T00:53:21.73152","exception":false,"start_time":"2022-10-10T00:53:21.671403","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["0.05"],"text/latex":["0.05"],"text/markdown":["0.05"],"text/plain":["[1] 0.05"]},"metadata":{},"output_type":"display_data"}],"source":["z<- esoph %>% filter(alcgp==\"120+\" & tobgp==\"30+\") %>% \n","  summarize(ncases = sum(ncases)) %>% pull(ncases)\n","bothp<-z/all_cases\n","bothp"]},{"cell_type":"markdown","id":"ef232724","metadata":{"papermill":{"duration":0.01086,"end_time":"2022-10-10T00:53:21.752729","exception":false,"start_time":"2022-10-10T00:53:21.741869","status":"completed"},"tags":[]},"source":["# <div style=\"width:100%;text-align: left; font-size:45px; font-family:Optima; font-weight:300; height: 30px; text-shadow: 4px 4px 4px #aaa\">Questions 11</div>\n","\n","<br>\n","<br>\n","\n","<div style=\"width:100%;font-family: Optima; font-size: 20px; font-weight: 400; line-height: 1.5; text-align: justify;\">For cases, what is the probability of being in the highest alcohol group <b>or</b> the highest tobacco group?<br>\n","For answering this aquestion, all we need is to adding both probabilities, but the trick is to subtracting the probability of being in both groups. This is the law of joining directories, in which is about both categories minus the gategory in between those categories.<br><br>\n","<center>$A + B = a + b - a|b$</center></div>\n"]},{"cell_type":"code","execution_count":13,"id":"821af407","metadata":{"execution":{"iopub.execute_input":"2022-10-10T00:53:21.777713Z","iopub.status.busy":"2022-10-10T00:53:21.77609Z","iopub.status.idle":"2022-10-10T00:53:21.79919Z","shell.execute_reply":"2022-10-10T00:53:21.796948Z"},"papermill":{"duration":0.038649,"end_time":"2022-10-10T00:53:21.802324","exception":false,"start_time":"2022-10-10T00:53:21.763675","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["0.33"],"text/latex":["0.33"],"text/markdown":["0.33"],"text/plain":["[1] 0.33"]},"metadata":{},"output_type":"display_data"}],"source":["atotal<-alcp+tobp-bothp\n","atotal"]},{"cell_type":"markdown","id":"86e811fa","metadata":{"papermill":{"duration":0.010726,"end_time":"2022-10-10T00:53:21.823456","exception":false,"start_time":"2022-10-10T00:53:21.81273","status":"completed"},"tags":[]},"source":["# <div style=\"width:100%;text-align: left; font-size:45px; font-family:Optima; font-weight:300; height: 30px; text-shadow: 4px 4px 4px #aaa\">Questions 12</div>\n","\n","<br>\n","<br>\n","\n","<div style=\"width:100%;font-family: Optima; font-size: 20px; font-weight: 400; line-height: 1.5; text-align: justify;\">For controlled cases, what is the probability of being in the highest alcohol group?<br>\n","To answer this question we do the same as question 8, easily filter our dataset and divide it by total cases</div>\n"]},{"cell_type":"code","execution_count":14,"id":"911a90fe","metadata":{"execution":{"iopub.execute_input":"2022-10-10T00:53:21.84909Z","iopub.status.busy":"2022-10-10T00:53:21.847451Z","iopub.status.idle":"2022-10-10T00:53:21.881767Z","shell.execute_reply":"2022-10-10T00:53:21.879418Z"},"papermill":{"duration":0.049891,"end_time":"2022-10-10T00:53:21.884804","exception":false,"start_time":"2022-10-10T00:53:21.834913","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["0.0687"],"text/latex":["0.0687"],"text/markdown":["0.0687"],"text/plain":["[1] 0.0687"]},"metadata":{},"output_type":"display_data"}],"source":["f<- esoph %>% filter(alcgp==\"120+\") %>% \n","  summarize(ncontrols=sum(ncontrols)) %>% pull(ncontrols)\n","alcont<- round(f/all_controls, 4)\n","alcont"]},{"cell_type":"markdown","id":"81de417b","metadata":{"papermill":{"duration":0.011047,"end_time":"2022-10-10T00:53:21.906358","exception":false,"start_time":"2022-10-10T00:53:21.895311","status":"completed"},"tags":[]},"source":["# <div style=\"width:100%;text-align: left; font-size:45px; font-family:Optima; font-weight:300; height: 30px; text-shadow: 4px 4px 4px #aaa\">Questions 13</div>\n","\n","<br>\n","<br>\n","\n","<div style=\"width:100%;font-family: Optima; font-size: 20px; font-weight: 400; line-height: 1.5; text-align: justify;\">How many times more likely are cases than controlled to be in the highest alcohol group?\n","<br>\n","Well it is a pretty simple question, however to answer it we had to answer the questions above and use the results to get the correct answer.</div>\n"]},{"cell_type":"code","execution_count":15,"id":"0239eb78","metadata":{"execution":{"iopub.execute_input":"2022-10-10T00:53:21.932764Z","iopub.status.busy":"2022-10-10T00:53:21.931253Z","iopub.status.idle":"2022-10-10T00:53:21.951212Z","shell.execute_reply":"2022-10-10T00:53:21.949338Z"},"papermill":{"duration":0.035303,"end_time":"2022-10-10T00:53:21.953972","exception":false,"start_time":"2022-10-10T00:53:21.918669","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["3.28"],"text/latex":["3.28"],"text/markdown":["3.28"],"text/plain":["[1] 3.28"]},"metadata":{},"output_type":"display_data"}],"source":["round(alcp/alcont, 2)"]},{"cell_type":"markdown","id":"4fd76df5","metadata":{"papermill":{"duration":0.010713,"end_time":"2022-10-10T00:53:21.975315","exception":false,"start_time":"2022-10-10T00:53:21.964602","status":"completed"},"tags":[]},"source":["# <div style=\"width:100%;text-align: left; font-size:45px; font-family:Optima; font-weight:300; height: 30px; text-shadow: 4px 4px 4px #aaa\">Questions 14</div>\n","\n","<br>\n","<br>\n","\n","<div style=\"width:100%;font-family: Optima; font-size: 20px; font-weight: 400; line-height: 1.5; text-align: justify;\">For controls, what is the probability of being in the highest tobacco group?<br>\n","It is familiar question, isn't it? So we use the same process as we did for the cases.</div>\n"]},{"cell_type":"code","execution_count":16,"id":"7c5b59a9","metadata":{"execution":{"iopub.execute_input":"2022-10-10T00:53:21.999905Z","iopub.status.busy":"2022-10-10T00:53:21.998294Z","iopub.status.idle":"2022-10-10T00:53:22.029524Z","shell.execute_reply":"2022-10-10T00:53:22.027682Z"},"papermill":{"duration":0.046221,"end_time":"2022-10-10T00:53:22.032131","exception":false,"start_time":"2022-10-10T00:53:21.98591","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["0.0841"],"text/latex":["0.0841"],"text/markdown":["0.0841"],"text/plain":["[1] 0.0841"]},"metadata":{},"output_type":"display_data"}],"source":["g<- esoph %>% filter(tobgp==\"30+\") %>% \n","  summarize(ncontrols= sum(ncontrols)) %>% pull(ncontrols)\n","tobcont<-round(g/all_controls, 4)\n","tobcont"]},{"cell_type":"markdown","id":"821fbaa0","metadata":{"papermill":{"duration":0.011783,"end_time":"2022-10-10T00:53:22.054668","exception":false,"start_time":"2022-10-10T00:53:22.042885","status":"completed"},"tags":[]},"source":["# <div style=\"width:100%;text-align: left; font-size:45px; font-family:Optima; font-weight:300; height: 30px; text-shadow: 4px 4px 4px #aaa\">Questions 15</div>\n","\n","<br>\n","<br>\n","\n","<div style=\"width:100%;font-family: Optima; font-size: 20px; font-weight: 400; line-height: 1.5; text-align: justify;\">For controls, what is the probability of being in the highest alcohol group <b>and</b> the highest tobacco group?<br>\n","Again, we calculate the probabilty of being in both high groups as we did before for cases.</div>\n"]},{"cell_type":"code","execution_count":17,"id":"e2525c22","metadata":{"execution":{"iopub.execute_input":"2022-10-10T00:53:22.079667Z","iopub.status.busy":"2022-10-10T00:53:22.078067Z","iopub.status.idle":"2022-10-10T00:53:22.11396Z","shell.execute_reply":"2022-10-10T00:53:22.112091Z"},"papermill":{"duration":0.051055,"end_time":"2022-10-10T00:53:22.11651","exception":false,"start_time":"2022-10-10T00:53:22.065455","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["0.0133"],"text/latex":["0.0133"],"text/markdown":["0.0133"],"text/plain":["[1] 0.0133"]},"metadata":{},"output_type":"display_data"}],"source":["h<- esoph %>% filter(alcgp==\"120+\" & tobgp==\"30+\") %>% \n","  summarize(ncontrols = sum(ncontrols)) %>% pull(ncontrols)\n","bothcont<-round(h/all_controls, 4)\n","bothcont"]},{"cell_type":"markdown","id":"f18a3112","metadata":{"papermill":{"duration":0.010978,"end_time":"2022-10-10T00:53:22.138334","exception":false,"start_time":"2022-10-10T00:53:22.127356","status":"completed"},"tags":[]},"source":["# <div style=\"width:100%;text-align: left; font-size:45px; font-family:Optima; font-weight:300; height: 30px; text-shadow: 4px 4px 4px #aaa\">Questions 16</div>\n","\n","<br>\n","<br>\n","\n","<div style=\"width:100%;font-family: Optima; font-size: 20px; font-weight: 400; line-height: 1.5; text-align: justify;\">For controls, what is the probability of being in the highest alcohol group <b>or</b> the highest tobacco group?<br>\n","Remember the law of join? Yes, it is the same and we need to add up the probabilities and subtracting the group in between them.</div>\n"]},{"cell_type":"code","execution_count":18,"id":"9705244a","metadata":{"execution":{"iopub.execute_input":"2022-10-10T00:53:22.164069Z","iopub.status.busy":"2022-10-10T00:53:22.162622Z","iopub.status.idle":"2022-10-10T00:53:22.184803Z","shell.execute_reply":"2022-10-10T00:53:22.18183Z"},"papermill":{"duration":0.03831,"end_time":"2022-10-10T00:53:22.187966","exception":false,"start_time":"2022-10-10T00:53:22.149656","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["0.1395"],"text/latex":["0.1395"],"text/markdown":["0.1395"],"text/plain":["[1] 0.139"]},"metadata":{},"output_type":"display_data"}],"source":["btotal<-alcont+tobcont-bothcont\n","btotal"]},{"cell_type":"markdown","id":"e5599a13","metadata":{"papermill":{"duration":0.011917,"end_time":"2022-10-10T00:53:22.212613","exception":false,"start_time":"2022-10-10T00:53:22.200696","status":"completed"},"tags":[]},"source":["# <div style=\"width:100%;text-align: left; font-size:45px; font-family:Optima; font-weight:300; height: 30px; text-shadow: 4px 4px 4px #aaa\">Questions 17</div>\n","\n","<br>\n","<br>\n","\n","<div style=\"width:100%;font-family: Optima; font-size: 20px; font-weight: 400; line-height: 1.5; text-align: justify;\">How many times more likely are cases than controls to be in the highest alcohol group or the highest tobacco group?\n","<br>\n","Now it is the final question in which we use the results of the all questions above and calculate the relativity of those groups.</div>\n"]},{"cell_type":"code","execution_count":19,"id":"e77ced96","metadata":{"execution":{"iopub.execute_input":"2022-10-10T00:53:22.241353Z","iopub.status.busy":"2022-10-10T00:53:22.239649Z","iopub.status.idle":"2022-10-10T00:53:22.262926Z","shell.execute_reply":"2022-10-10T00:53:22.260663Z"},"papermill":{"duration":0.041093,"end_time":"2022-10-10T00:53:22.266232","exception":false,"start_time":"2022-10-10T00:53:22.225139","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["2.37"],"text/latex":["2.37"],"text/markdown":["2.37"],"text/plain":["[1] 2.37"]},"metadata":{},"output_type":"display_data"}],"source":["round(atotal/btotal,2)"]},{"cell_type":"markdown","id":"ba6af4d8","metadata":{"papermill":{"duration":0.011296,"end_time":"2022-10-10T00:53:22.289461","exception":false,"start_time":"2022-10-10T00:53:22.278165","status":"completed"},"tags":[]},"source":["<div style=\"width:100%;font-family: Optima; font-size: 20px; font-weight: 400; line-height: 1.5; text-align: justify;\">So we can see that based on this dataset we can see that consuming alcohol or tobacco is way more likely to be a cancer case. Further we will present some figures make this numbers easier to understand.\n","<br><br><br><br>\n","To be continued...</div>"]},{"cell_type":"code","execution_count":20,"id":"5c61e307","metadata":{"execution":{"iopub.execute_input":"2022-10-10T00:53:22.316685Z","iopub.status.busy":"2022-10-10T00:53:22.315177Z","iopub.status.idle":"2022-10-10T00:53:22.327544Z","shell.execute_reply":"2022-10-10T00:53:22.325821Z"},"papermill":{"duration":0.029426,"end_time":"2022-10-10T00:53:22.329983","exception":false,"start_time":"2022-10-10T00:53:22.300557","status":"completed"},"tags":[]},"outputs":[],"source":["# I will plot the Q/A plus more hidden information behind this simple dataset..."]}],"metadata":{"kernelspec":{"display_name":"R","language":"R","name":"ir"},"language_info":{"codemirror_mode":"r","file_extension":".r","mimetype":"text/x-r-source","name":"R","pygments_lexer":"r","version":"4.0.5"},"papermill":{"default_parameters":{},"duration":7.837711,"end_time":"2022-10-10T00:53:22.462372","environment_variables":{},"exception":null,"input_path":"__notebook__.ipynb","output_path":"__notebook__.ipynb","parameters":{},"start_time":"2022-10-10T00:53:14.624661","version":"2.4.0"}},"nbformat":4,"nbformat_minor":5}